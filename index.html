function handleAnswer(choiceIndex) {
  if (answered) return;
  answered = true;

  const q = examQuestions[idx];
  const isCorrect = choiceIndex === q.correctIndex;

  userAnswerById.set(q.id, choiceIndex);
  isCorrectById.set(q.id, isCorrect);

  lockChoices(true);
  feedbackEl.style.display = "block";

  const fb = getFeedbackFor(q);
  const correctTxt = q.choices[q.correctIndex];

  // Nollst√§ll
  feedbackEl.className = "feedback";
  feedbackEl.innerHTML = "";

  const exp = (fb?.explanation || "").trim();
  const where = (fb?.where || "").trim();

  if (isCorrect) {
    correctCount++;
    feedbackEl.classList.add("ok");

    // ‚úÖ R√§tt ‚Äì INGEN extra feedback
    const title = document.createElement("div");
    title.textContent = "‚úÖ R√§tt!";
    feedbackEl.appendChild(title);

  } else {
    wrongCount++;
    feedbackEl.classList.add("bad");

    // ‚ùå Fel + r√§tt svar
    const title = document.createElement("div");
    title.innerHTML = `‚ùå Fel. R√§tt svar: <strong>${correctTxt}</strong>`;
    feedbackEl.appendChild(title);

    // ‚úÖ Feedback visas ENDAST vid fel (om du fyllt i den)
    if (exp || where) {
      const info = document.createElement("div");
      info.className = "muted";
      info.style.marginTop = "8px";
      info.innerHTML = `
        ${exp ? `<div>${exp}</div>` : ""}
        ${where ? `<div style="margin-top:6px;">üìå Var hittar du det? ${where}</div>` : ""}
      `;
      feedbackEl.appendChild(info);
    }
  }

  nextBtn.disabled = false;
}
